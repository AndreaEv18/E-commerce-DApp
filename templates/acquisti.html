<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>I miei acquisti</title>

    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='vendor/bootstrap/css/bootstrap.min.css') }}">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/myPurch.css') }}">

</head>

<body>

    <div class="patterns">
  <svg width="100%" height="100%">
<text x="50%" y="60%" text-anchor="middle"  >
   I miei acquisti
 </text>
 <p>E tu, quale hai preferito?</p>
 </svg>
</div>

    <div class="content">
        <!-- content here -->
        <div class="product-grid product-grid--flexbox">
            <div class="product-grid__wrapper">
                <!-- Product list start here -->

                <!-- Single product -->
                <div class="product-grid__product-wrapper">
                    <div class="product-grid__product">
                        <div class="product-grid__img-wrapper">         
                            <img src="https://www.grandibottiglie.com/18943-home_default/bottiglia-vino-personalizzata-barbera-d-alba-doc-2019-lanzarotti.jpg" alt="Img" class="product-grid__img" />
                        </div>
                        <span class="product-grid__title">Vino1</span>
                        <div class="product-grid__extend-wrapper">
                            <div class="product-grid__extend">
                                <p class="product-grid__description">Clicca su vota per lasciarci il tuo feedback</p>
                                <span class="product-grid__btn product-grid__add-to-cart"><i class="fa fa-cart-arrow-down"></i> Vota</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end Single product -->

                <div class="product-grid__product-wrapper">
                    <div class="product-grid__product">
                        <div class="product-grid__img-wrapper">         
                            <img src="https://www.grandibottiglie.com/18943-home_default/bottiglia-vino-personalizzata-barbera-d-alba-doc-2019-lanzarotti.jpg" alt="Img" class="product-grid__img" />
                        </div>
                        <span class="product-grid__title">Vino1</span>
                        <div class="product-grid__extend-wrapper">
                            <div class="product-grid__extend">
                                <p class="product-grid__description">Clicca su vota per lasciarci il tuo feedback</p>
                                <span class="product-grid__btn product-grid__add-to-cart"><i class="fa fa-cart-arrow-down"></i> Vota</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="product-grid__product-wrapper">
                    <div class="product-grid__product">
                        <div class="product-grid__img-wrapper">         
                            <img src="https://www.grandibottiglie.com/18943-home_default/bottiglia-vino-personalizzata-barbera-d-alba-doc-2019-lanzarotti.jpg" alt="Img" class="product-grid__img" />
                        </div>
                        <span class="product-grid__title">Vino1</span>
                        <div class="product-grid__extend-wrapper">
                            <div class="product-grid__extend">
                                <p class="product-grid__description">Clicca su vota per lasciarci il tuo feedback</p>
                                <span class="product-grid__btn product-grid__add-to-cart"><i class="fa fa-cart-arrow-down"></i> Vota</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="product-grid__product-wrapper">
                    <div class="product-grid__product">
                        <div class="product-grid__img-wrapper">         
                            <img src="https://www.grandibottiglie.com/18943-home_default/bottiglia-vino-personalizzata-barbera-d-alba-doc-2019-lanzarotti.jpg" alt="Img" class="product-grid__img" />
                        </div>
                        <span class="product-grid__title">Vino1</span>
                        <div class="product-grid__extend-wrapper">
                            <div class="product-grid__extend">
                                <p class="product-grid__description">Clicca su vota per lasciarci il tuo feedback</p>
                                <span class="product-grid__btn product-grid__add-to-cart"><i class="fa fa-cart-arrow-down"></i> Vota</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="product-grid__product-wrapper">
                    <div class="product-grid__product">
                        <div class="product-grid__img-wrapper">         
                            <img src="https://www.grandibottiglie.com/18943-home_default/bottiglia-vino-personalizzata-barbera-d-alba-doc-2019-lanzarotti.jpg" alt="Img" class="product-grid__img" />
                        </div>
                        <span class="product-grid__title">Vino1</span>
                        <div class="product-grid__extend-wrapper">
                            <div class="product-grid__extend">
                                <p class="product-grid__description">Clicca su vota per lasciarci il tuo feedback</p>
                                <span class="product-grid__btn product-grid__add-to-cart"><i class="fa fa-cart-arrow-down"></i> Vota</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="product-grid__product-wrapper">
                    <div class="product-grid__product">
                        <div class="product-grid__img-wrapper">         
                            <img src="https://www.grandibottiglie.com/18943-home_default/bottiglia-vino-personalizzata-barbera-d-alba-doc-2019-lanzarotti.jpg" alt="Img" class="product-grid__img" />
                        </div>
                        <span class="product-grid__title">Vino1</span>
                        <div class="product-grid__extend-wrapper">
                            <div class="product-grid__extend">
                                <p class="product-grid__description">Clicca su vota per lasciarci il tuo feedback</p>
                                <span class="product-grid__btn product-grid__add-to-cart"><i class="fa fa-cart-arrow-down"></i> Vota</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="product-grid__product-wrapper">
                    <div class="product-grid__product">
                        <div class="product-grid__img-wrapper">         
                            <img src="https://www.grandibottiglie.com/18943-home_default/bottiglia-vino-personalizzata-barbera-d-alba-doc-2019-lanzarotti.jpg" alt="Img" class="product-grid__img" />
                        </div>
                        <span class="product-grid__title">Vino1</span>
                        <div class="product-grid__extend-wrapper">
                            <div class="product-grid__extend">
                                <p class="product-grid__description">Clicca su vota per lasciarci il tuo feedback</p>
                                <span class="product-grid__btn product-grid__add-to-cart"><i class="fa fa-cart-arrow-down"></i> Vota</span>
                            </div>
                        </div>
                    </div>
                </div>

                <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet">

                <div id="btn">
                    <span class="noselect">Home</span>
                    <div id="circle"></div>
                </div>
                <div id="btn1">
                    <span class="noselect1">Catalogo</span>
                    <div id="circle1"></div>
                </div>
                

                
            </div>      
        </div>
    </div>
</div>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="vendor/js/web3.min.js"></script>

    <script>
        if (typeof web3 !== 'undefined') {
            web3 = new Web3(web3.currentProvider);
            console.log("defined");
        } else {
            // set the provider you want from Web3.providers
            web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:7545"));
            console.log("undefined");
        }

        web3.eth.defaultAccount = web3.eth.accounts[0];
        var SmartContract = web3.eth.contract([{
                "constant": true,
                "inputs": [],
                "name": "last_completed_migration",
                "outputs": [{
                    "name": "",
                    "type": "uint256"
                }],
                "payable": false,
                "stateMutability": "view",
                "type": "function",
                "signature": "0x445df0ac"
            },
            {
                "constant": true,
                "inputs": [],
                "name": "owner",
                "outputs": [{
                    "name": "",
                    "type": "address"
                }],
                "payable": false,
                "stateMutability": "view",
                "type": "function",
                "signature": "0x8da5cb5b"
            },
            {
                "inputs": [],
                "payable": false,
                "stateMutability": "nonpayable",
                "type": "constructor",
                "signature": "constructor"
            },
            {
                "constant": false,
                "inputs": [{
                    "name": "completed",
                    "type": "uint256"
                }],
                "name": "setCompleted",
                "outputs": [],
                "payable": false,
                "stateMutability": "nonpayable",
                "type": "function",
                "signature": "0xfdacd576"
            },
            {
                "constant": false,
                "inputs": [{
                    "name": "new_address",
                    "type": "address"
                }],
                "name": "upgrade",
                "outputs": [],
                "payable": false,
                "stateMutability": "nonpayable",
                "type": "function",
                "signature": "0x0900f010"
            },
            {
                "constant": true,
                "inputs": [{
                    "name": "",
                    "type": "uint256"
                }],
                "name": "buyers",
                "outputs": [{
                    "name": "",
                    "type": "address"
                }],
                "payable": false,
                "stateMutability": "view",
                "type": "function",
                "signature": "0xf2aa8218"
            },
            {
                "constant": false,
                "inputs": [{
                    "name": "artId",
                    "type": "uint256"
                }],
                "name": "purchase",
                "outputs": [{
                    "name": "",
                    "type": "uint256"
                }],
                "payable": false,
                "stateMutability": "nonpayable",
                "type": "function",
                "signature": "0xefef39a1"
            },
            {
                "constant": true,
                "inputs": [],
                "name": "getBuyers",
                "outputs": [{
                    "name": "",
                    "type": "address[6]"
                }],
                "payable": false,
                "stateMutability": "view",
                "type": "function",
                "signature": "0xf64bfaba"
            }
        ]);
        var contract = SmartContract.at("0xbF4ce7649f254454372EF3EAE23B263C0291d980");

        function getBuyer(artId) {

            var buyer = contract.buyers(artId);

            return buyer;
        }

        var acquirenti = contract.getBuyers();
        var artworks = ["La nascita di Venere", "Ultima cena", "Campo di grano con volo di corvi", "La persistenza della memoria", "Guernica", "Il Bacio"];

        for (i = 0, n = 6; i < n; i++) {
            var table = document.getElementById("myTable");
            var row = table.insertRow(i + 1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            cell1.innerHTML = i;
            cell2.innerHTML = artworks[i];
            if (!acquirenti[i].startsWith("0x00")) {
                cell3.innerHTML = acquirenti[i];
            } else {
                cell3.innerHTML = "Non ancora acquistato"
            }
        }

    </script>

</body>

</html>
